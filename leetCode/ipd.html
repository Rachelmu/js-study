<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <title>数据树</title>

</head>
<body>

</body>
<script>
const list = [
    { id:1,pid:0,value:"小明" },
    { id:2,pid:1,value:"小明1" },
    { id:3,pid:1,value:"小明2" },
    { id:4,pid:1,value:"小明3" },
    { id:5,pid:0,value:"小红" },
    { id:6,pid:5,value:"小红1" },
    { id:7,pid:5,value:"小红2" },
    { id:8,pid:5,value:"小红3" },
    { id:9,pid:0,value:"雅典娜" },
    { id:10,pid:9,value:"雅典娜1" },
    { id:11,pid:10,value:"雅典娜2" },
    { id:12,pid:11,value:"雅典娜3" },
    { id:13,pid:12,value:"雅典娜4" },
    { id:14,pid:13,value:"雅典娜5" },
    { id:15,pid:14,value:"雅典娜6" },
    { id:16,pid:0,value:"小王" }
];

function reset(arr) {
    let reverseList = []
    if (!Array.isArray(arr)) {
        return reverseList
    }
    arr.forEach(item => {
        delete item.children;
    });
    let temp = {};
    arr.forEach(item => {
        temp[item.id] = item;
        console.log(item.children, item)
    });
    console.log('arr', arr)
    // console.log('temp', temp)
    arr.forEach(item => {
        let parent = temp[item.pid];
        console.log('temp', temp)
        if (parent) {
            (parent.children || (parent.children = [])).push(item);
            console.log((parent.children || (parent.children = [])), parent.children, '1')
        } else {
            reverseList.push(item);
        }
    });
    console.log(reverseList)
    return reverseList;
}
reset(list)
console.log('list', list)
</script>
</html>
